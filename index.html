<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#02d463" />
    <meta property="og:image" content="./assets/images/me.jpg" />
    <meta name="description" content="Information about Thorben Klein" />
    <meta property="og:type" content="website" />
    <link rel="icon" type="image/jpg" sizes="500x500" href="./assets/images/me.jpg" />
    <title>Thorben Klein</title>
    <link rel="stylesheet" href="./assets/css/master.css" />
    <!-- FontAwesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
      integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
  </head>
  <body>
    <div class="wrapper">
      <aside>
        <div>
          <img src="./assets/images/me.jpg" alt="Picure of me" />
          <h2 class="name">Thorben Klein</h2>
          <ul>
            <li>
              <a href="//github.com/tklein1801/">GitHub</a>
            </li>
            <li>
              <a href="//instagram.com/thorben.klein/">Instagram</a>
            </li>
            <li>
              <a href="//github.com/tklein1801/tklein1801.github.io/">Source Code</a>
            </li>
            <li>
              <a href="mailto:thorben.klein1801@gmail.com">Contact me</a>
            </li>
          </ul>
        </div>
      </aside>
      <main>
        <section class="header">
          <nav>
            <a href="#about-me">About me</a>
            <a href="#my-projects">My projects</a>
            <a href="#my-packages">My packages</a>
            <a href="mailto:thorben.klein1801@gmail.com">Contact me</a>
          </nav>
        </section>

        <section id="about">
          <div class="row">
            <div>
              <h1 id="about-me" class="anchored">About me</h1>
              <p>
                Hello! I'm just a little apprentice @
                <a
                  href="https://www.tchibo-karriere.de/karriere?gclid=CjwKCAjw-sqKBhBjEiwAVaQ9a6fhBbYIKNhbnMPBZA1ksit9o4VvcPldBhoTcReC1r5J4KKCkatMVhoC82QQAvD_BwE"
                  >Tchibo GmbH</a
                >
                who's doing some programming & other random stuff. On this website you can have a
                look on projects & some other stuff I made in the past...
              </p>

              <div id="skills-container">
                <div class="skill-column">
                  <h4 class="anchored">Skills I own...</h4>
                  <ul id="skills" class="skill-list">
                    <li class="skill-item"><i class="fab fa-html5"></i> HTML</li>
                    <li class="skill-item"><i class="fab fa-html5"></i> JSX</li>
                    <li class="skill-item"><i class="fab fa-css3-alt"></i> CSS</li>
                    <li class="skill-item"><i class="fab fa-sass"></i> SCSS</li>
                    <li class="skill-item"><i class="fab fa-js-square"></i> JavaScript</li>
                  </ul>
                </div>

                <div class="skill-column">
                  <h4 class="anchored">Frameworks</h4>
                  <ul id="frameworks" class="skill-list">
                    <li class="skill-item"><i class="fab fa-react"></i> ReactJS</li>
                    <li class="skill-item"><i class="fab fa-react"></i> React Native</li>
                    <li class="skill-item"><i class="fab fa-bootstrap"></i> Bootstrap</li>
                    <li class="skill-item"><i class="fa fa-database"></i> Firebase</li>
                    <li class="skill-item"><i class="fas fa-cross"></i> jQuery</li>
                  </ul>
                </div>

                <div class="skill-column achievements">
                  <h4 class="anchored">Achievements</h4>
                  <div id="achievement">
                    <div class="stats-card">
                      <h5 id="total-projects" class="count">0</h5>
                      <p class="label">Total Projects</p>
                    </div>
                    <div class="stats-card">
                      <h5 id="issues" class="count">0</h5>
                      <p class="label">Issues Resolved</p>
                    </div>
                    <div class="stats-card">
                      <h5 id="followers" class="count">0</h5>
                      <p class="label">GitHub Followers</p>
                    </div>
                    <div class="stats-card">
                      <h5 id="experience" class="count">0</h5>
                      <p class="label">Years Experience</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div>
              <img class="me" src="./assets/images/me.jpg" alt="Picure of mine" />
            </div>
          </div>
        </section>

        <section>
          <h1 id="my-projects" class="anchored">My projects</h1>
          <div id="projects"></div>
        </section>

        <section>
          <h1 id="my-packages" class="anchored">My npm-packages</h1>
          <div id="packages"></div>
        </section>
      </main>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js"></script>
    <script>
      anchors.options = {
        placement: 'right',
        visible: 'always',
        icon: '#',
      };
      anchors.add('.anchored');
    </script>
    <script>
      window.onload = () => {
        fetch('https://api.dulliag.de/gh/tklein1801/stats')
          .then((response) => response.json())
          .then((json) => {
            document.querySelector('#achievement #total-projects').innerHTML =
              json.data.viewer.repositories.totalCount;

            document.querySelector('#achievement #issues').innerHTML =
              json.data.viewer.issues.totalCount;

            document.querySelector('#achievement #followers').innerHTML =
              json.data.viewer.followers.totalCount;

            document.querySelector('#achievement #experience').innerHTML =
              Math.abs(
                new Date(Date.now() - new Date(json.data.viewer.createdAt)).getUTCFullYear() - 1971
              ) + `+`;
          })
          .catch((err) => console.error(err));

        // Get projects
        const privateRepos = fetch('https://api.github.com/users/tklein1801/repos').then(
          (response) => response.json()
        );
        const orgRepos = fetch('https://api.github.com/orgs/dulliag/repos').then((response) =>
          response.json()
        );
        Promise.all([privateRepos, orgRepos])
          .then(([private, org]) => {
            const projectNames = [
              {
                name: 'A3RLRPG-Infoapp',
                order: 1,
              },
              {
                name: 'A3RLRPG-Infopanel',
                order: 2,
              },
              {
                name: 'DulliBot',
                order: 3,
              },
              {
                name: 'tklein1801.github.io',
                order: 4,
              },
              {
                name: 'BBS-Mitfahrzentrale',
                order: 5,
              },
              {
                name: 'BBS-Grid-Website',
                order: 6,
              },
            ];
            const projectList = [];
            projectList.fill({}, 0, projectNames.length);

            private.forEach((repo) => {
              const match = projectNames.filter((project) => project.name == repo.name),
                isWanted = match.length == 1;
              if (isWanted) projectList[match[0].order - 1] = repo;
            });

            org.forEach((repo) => {
              const match = projectNames.filter((project) => project.name == repo.name),
                isWanted = match.length == 1;
              if (isWanted) projectList[match[0].order - 1] = repo;
            });

            projectList.forEach((repo) => {
              const desc = repo.description !== null ? repo.description : 'Keine Beschreibung';
              document.querySelector('#projects').innerHTML += `<div class="project-card">
                  <div>
                    <h4 class="repo-name">
                      <a href="${repo.owner.html_url}" class="repo-link">@${repo.owner.login}</a>/<a href="${repo.html_url}" class="repo-link">${repo.name}</a>
                    </h4>
                    <p class="repo-description">${desc}</a>
                    <div class="repo-info row">
                      <div>
                        <i class="far fa-file-alt"></i>
                        <p>${repo.language}</p>
                      </div>

                      <div>
                        <a href="${repo.html_url}/stargazers" class="repo-link row">
                          <i class="far fa-star"></i>
                          <p>${repo.stargazers_count}</p>
                        </a>
                      </div>

                      <div>
                        <a href="${repo.html_url}/network/members" class="repo-link row">
                          <i class="fas fa-code-branch"></i>
                          <p>${repo.forks_count}</p>
                        </a>
                      </div>
                    </div>
                  </div>
                </div>`;
            });
          })
          .catch((err) => console.error(err));

        // Get packages
        fetch(`https://api.npms.io/v2/search?q=author:tklein1801`)
          .then((response) => response.json())
          .then((json) => {
            const package_list = json.results;

            if (package_list.length == 0) {
              document.querySelector('#packages').innerHTML += `<div class="package-card">
                    <div>
                      <h4 class="repo-name text-center mb-0">No packages found</h4>
                    </div>
                </div>`;
            } else {
              package_list.forEach((package) => {
                let classList = 'repo-name',
                  desc = '',
                  keywords = '';
                if (package.package.keywords !== undefined) {
                  package.package.keywords.forEach(
                    (word) => (keywords += `<span class="keyword">${word}</span>`)
                  );
                }
                if (package.package.description !== undefined) {
                  desc = `<p class="repo-description">${package.package.description}</p>`;
                }

                if (desc == '' && keywords == '') classList += ' mb-0';
                document.querySelector('#packages').innerHTML += `<div class="package-card">
                    <div>
                      <h4 class="repo-name mb-0">
                        <a href="${package.package.links.npm}" class="repo-link">${package.package.name} v${package.package.version}</a>
                      </h4>
                    </div>
                  </div>`;
              });
            }
          })
          .catch((err) => console.error(err));
      };
    </script>
  </body>
</html>
